{
    "name": "notepadqq",
    "rm-configure": true,
    "no-autogen": true,
    "build-options": {
        "env": {
            "QMAKEPATH": "QMAKEPATH:/app/lib"
        }
    },
    "sources": [
        {
            "type": "archive",
            "url": "https://github.com/notepadqq/notepadqq/archive/v1.4.4.tar.gz",
            "sha256": "b071646c1447b57c128cd2ca19fc3e43c23e91f4e784223aa84486350a30d02c"
        },
        {
            "type": "file",
            "path": "notepadqq_setup.bash"
        },
        {
            "type": "file",
            "path": "notepadqq_pre-install.bash"
        },
        {
            "type": "file",
            "path": "notepadqq_post-install.bash"
        },
        {
            "type": "shell",
            "commands": [
                "echo 'flatpak scripts: create & edit';",
                "./notepadqq_pre-install.bash;",
                "echo;"
            ]
        },
        {
            "type": "shell",
            "commands": [
                "mkdir -p 'src/editor/libs/codemirror/mode/m4';"
            ]
        },
        {
            "type": "shell",
            "commands": [
                "ln -s '/app/include/QtWebKitWidgets/qwebframe.h' '/app/include/QtWebKitWidgets/QWebFrame.h';"
            ]
        },
        {
            "type": "shell",
            "commands": [
                "qmake INCLUDEPATH+=/app/include/QtWebKitWidgets INCLUDEPATH+=/app/include/QtWebKit QMAKE_LIBDIR+=/app/lib PREFIX=/app LRELEASE=lrelease *.pro;"
            ]
        }
    ],
    "post-install": [
        "echo 'flatpak scripts: install & check';",
        "cd '/run/build/notepadqq'; ./notepadqq_post-install.bash;",
        "echo;"
    ]
}
